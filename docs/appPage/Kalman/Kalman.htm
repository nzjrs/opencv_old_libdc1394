 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
  <HEAD>
    <TITLE>Kalman Tracker</TITLE>
    <!-- Changed by: Jean-Yves Bouguet, 31-Dec-1999 -->
    <!-- Formatted and proofed in GNU Emacs by: Michael Chu, 00.06.05 -->
    <META NAME="GENERATOR" CONTENT="Microsoft FrontPage 4.0">
  </HEAD>
  <BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000CC" VLINK="#0000FF" ALINK="#FF0000">
    <a name="top">

    <CENTER>
      <TABLE CELLSPACING=0 CELLPADDING=5 WIDTH="90%" BGCOLOR="#6A9BED" NOSAVE >
	<TR NOSAVE>
	  <TD NOSAVE>
	    <CENTER><I><FONT COLOR="#000000"><FONT SIZE=+4> 
		    Kalman Tracker
		  </FONT></FONT></I></CENTER>
	  </TD>
	</TR>
      </TABLE>
    </CENTER>


    <p align="center">


      <BR>

    </a><img border="0" src="KalmanApp.jpg" width="709" height="275">
      <a name="top">

        <BR><BR>

    <H1>Description</H1>

  </a>The library provides a Kalman engine for tracking purposes. In the
    application described below, the CAMSHIFT color tracking algorithm is used
    to provide measurements for the X-Y tracking of a face (or other colored
    object). The CAMSHIFT algorithm implemented here just uses a simple 1-D Hue
    histogram sampled from the object using an HSV color space. Therefore,
    the color tracker may need some tuning as described below (see CAMSHIFT demo
    description page for more details).
    <br><br>
      To test the filter you will need DirectShow SDK, that is a part of
      DirectX SDK. Read <a href="../../faq.htm#DirectShow">FAQ</a> on how
      to install it properly.
    <h1>Kalman Color Tracker Demo</h1>
    You should setup or launch the following DirectShow filter graph edit (of
      course, your capture source will depend on your camera):
    <br><br>
    <center>
      <img border="0" src="KalmanGraph.jpg" width="715" height="96">
    </center>
    <h2 align="left">Controls</h2>
    <p align="left">The control panel for the filter (obtained by
      right-clicking) the Kalman filter in the filter graph above looks like:
    <p align="center"><img border="0" src="KalmanDialog.jpg" width="385" height="275">
    <p align="left"><b><font size=+2>[1]</font></b> This controls move the
      sample window around when you are not tracking.

      <br><b><font size=+2>[2]</font></b> This is the minimum saturation for a
      Hue pixel to be accepted threshold.

      <br><b><font size=+2>[3]</font></b> This is the minimum brightness for a
      Hue pixel to be accepted threshold.

      <br><b><font size=+2>[4]</font></b> This allows you to toggle between the
      raw video image and the Hue histogram backprojected image.

      <br><b><font size=+2>[5]</font></b> Sample color under box [1] and start
      Kalman tracking.

      <br><b><font size=+2>[6]</font></b> Stop Kalman tracking.

      <br>
    <h2>
      How to
    </h2>
    <h3>Start Tracking</h3>
    1. Select Normal view [4].<br>
    2. Set the thresholds to zero [2] &amp; [3].<br>
    3. Move the sample box using [1] so that it covers the colored object to be tracked.<br>
    4. Press &quot;Start Track&quot; [5].<br>
    
    <h3>Tuning the tracking:</h3>
    1. Select Back Project view [4]. The goal is to have the image
    such as on the left below to look like the cleaner image on
    right below.<br>
    <br>
    <CENTER><img border="0" src="kalmanbackNClean.jpg" width="649" height="240"></CENTER>
    <br>
    2. Increase minimum saturation threshold [2] to clean up the image
    without diminishing the object of interest too much.<br>
    
    3. Increase minimum brightness threshold [3] to finish the
    &quot;clean up&quot; job. Don't turn too high or else bright
    spots on the tracked object will become
    &quot;holes&quot;.<br>

    4. Turn normal view back on [4].<br>

    <h2>Display</h2>
    The meaning of the normal view display is as follows with
      reference to the figure below:<br>
    <br>
    <center><img border="0" src="kalmanTrackShot.jpg" width="320" height="240"></center>
    <br>
    <font size=+2><b>[A]</b></font> Velocity direction and
      magnitude estimation.<br>
    <font size=+2><b>[B]</b></font> Sample window if not
      tracking, tracking window if tracking.<br>
    <font size=+2><b>[C]</b></font> Estimated location of
      the object.

    <br><br>
    <hr noshade size=2 width=100%>

  </BODY> </HTML>
